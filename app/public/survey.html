<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey Page | Gut Buddies</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">

    <style>
        select {
            width: 100%;
            margin-top: 24px;
            display: block;
            text-align: center;
        }

        .question-container {
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            padding: 2rem;
        }
        .question-container:nth-last-of-type(odd) {
            background-color: #ccc;
        }
        .question-container:nth-last-of-type(even) {
            background-color: #888;
        }
    </style>
</head>

<body>
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <form id="id-form">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" class="form-control" id="name" aria-describedby="nameHelp" placeholder="Banister Crumblebench">
                        </div>
                        <div class="form-group">
                            <label for="photo">Photo</label>
                            <input type="text" class="form-control" id="photo" placeholder="http://images.amcnetworks.com/bbendynoodle_crumperbunts.jpg">
                            <small id="nameHelp" class="form-text text-muted">We'll share your name and photo with your new
                                bestie, Mark Zuckerberg, and anyone else with enough cash.</small>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <section class="my-5">
        <div class="container">
            <div class="row">
                <div class="col-12 my-5">
                    <div class="text-center mb-5">
                        <h1 class="mb-4">How likely are you to eat the following foods?</h1>
                        <h3>Answer on a scale of 1-5, with 5 being the most likely to eat it.</h3>
                        <h3 class="text-muted"><em>(Don't forget to answer with your gut.)</em></h3>
                    </div>
                    <form id="main-form">
                        <div class="row question-container">
                            <div class="col-sm-8 question">
                                <h3>1. I like a runny egg.</h3>
                                <select name="question-1">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4">
                                <img class="img-fluid" src="https://airfryer.cooking/wp-content/uploads/2018/01/soft_boiled_egg_large.jpg">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-2">
                                <h3>2. I order my steak very rare.</h3>
                                <select name="question-2">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-1">
                                <img class="img-fluid" src="http://3c9bl93o71m619w9kn2rfwinkdh-wpengine.netdna-ssl.com/wp-content/uploads/2014/04/very-rare-steak.png">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-1">
                                <h3>3. If given a spice option, I'll order the highest heat level.</h3>
                                <select name="question-3">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-2">
                                <img class="img-fluid" src="https://s3-media1.fl.yelpcdn.com/bphoto/cuuJJ5xdTLyjNGLa2Zby2Q/o.jpg">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-2">
                                <h3>4. I like drinks with egg whites in them.</h3>
                                <select name="question-4">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-1">
                                <img class="img-fluid" src="https://icdn3.themanual.com/image/themanual/matcha-do-about-nothing-1-800x800.jpg">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-1">
                                <h3>5. I like raw oysters. (From buck-a-shucks to beougie ones)</h3>
                                <select name="question-5">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-2">
                                <img class="img-fluid" src="http://farm8.staticflickr.com/7196/6804099886_600e856ec4_o.jpg">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-2">
                                <h3>6. If you're serving veal, lamb, suckling pig, (basically any baby animal) keep me off the guest list.</h3>
                                <select name="question-6">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-1">
                                <img class="img-fluid" src="https://www.phillymag.com/wp-content/uploads/sites/3/2012/10/sucklingpig1.jpg">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-1">
                                <h3>7. Chicken is the best meat there is.</h3>
                                <select name="question-7">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-2">
                                <img class="img-fluid" src="https://i1.wp.com/cafedelites.com/wp-content/uploads/2017/08/Crispy-Buffalo-Chicken-WIngs-IMAGE-5.jpg?resize=500%2C375&ssl=1">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-2">
                                <h3>8. You have to leave your comfort zone to find the best meals.</h3>
                                <select name="question-8">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-1">
                                <img class="img-fluid" src="https://d2v9y0dukr6mq2.cloudfront.net/video/thumbnail/l3cCN8a/videoblocks-people-eating-at-street-stall-restauranthanoivietnam_bkxw46jj6_thumbnail-small01.jpg">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-1">
                                <h3>9. I'll eat a haute-gourmet meal (Michelin caliber) made entirely from insects.</h3>
                                <select name="question-9">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-2">
                                <img class="img-fluid" src="http://food-insects.com/file/2017/10/The-Human-Use-of-Insects-as-a-Food-Resource-2.jpg">
                            </div>
                        </div>
                        <div class="row question-container">
                            <div class="col-sm-8 question order-2">
                                <h3>10. If socially acceptable, I'd dable in cannabalism.</h3>
                                <select name="question-10">
                                    <option>Choose Your Answer</option>
                                    <option data-val="1">1 (strongly disagree)</option>
                                    <option data-val="2">2</option>
                                    <option data-val="3">3</option>
                                    <option data-val="4">4</option>
                                    <option data-val="5">5 (strongly agree)</option>
                                </select>
                            </div>
                            <div class="col-sm-4 order-1">
                                <img class="img-fluid" src="https://i.kinja-img.com/gawker-media/image/upload/s--XUH3uV68--/c_scale,f_auto,fl_progressive,q_80,w_800/1482712341109124933.jpg">
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">Submit</button>
                    </form>
                </div>     
            </div>
            <hr>
            <div class="row">
                <div class="col-12">
                    <ul style="list-style: none;">
                        <li style="float: left; margin-right: 12px;"><a href="/api/friends">API Friends List</a></li>
                        <li style="float: left"><a href="https://github.com/gkpeel/friend-finder-app">GitHub Repo</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal Template -->
    <div id="best-friend-modal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Your Best Friend is: <span id="best-friend-name"></span></p>
                <img src="#" class="img-fluid" id="best-friend-picture">
            </div>
            </div>
        </div>
    </div>

    <!-- Start Scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <script>
        $( "#main-form" ).submit(function( event ) {
            event.preventDefault();
            var score = $(this).serializeArray();

            var newFriend = {
                name: $('#name').val().trim(),
                photo: $('#photo').val().trim(),
                scores: []
            }

            $('select [name="question-1"]').prop('selectedIndex',0);
            
            for (var i=0; i<score.length; i++) {
                newFriend.scores.push(score[i].value.substring(0,1));
            }


            $.post('api/friends', newFriend).then(function(data){
                console.log(data);
                $('#best-friend-name').append(data.name);
                $('#best-friend-picture').attr('src', data.photo);
                $('#best-friend-modal').modal('show');
            });
            
            
        });

    </script>
</body>

</html>